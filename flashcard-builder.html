<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>StudyPal: Build</title>
    <meta name="description" content="StudyPal flashcard builder page." />

    <link rel="stylesheet" href="/static/css/common.css">

    <!-- https://getbootstrap.com/docs/5.3/getting-started/introduction/ -->
    <link
      async
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      /* .bg-dark === --bs-dark */
      /* .bg-theme {
        background-color: var(--bs-dark);
      } */

      /* information icon for text radio options */
      .bi-info-circle:hover {
        fill:orange;
        cursor: pointer;
      }

      /* copied bs .form-control styles for output div to match it */
      .sp-output-group {
        /* text-align: center; */
        white-space: nowrap;
        padding: .375rem .75rem;
        color: var(--bs-body-color);
        background-color: var(--bs-tertiary-bg);
        border: var(--bs-border-width) solid var(--bs-border-color);
        border-radius: var(--bs-border-radius);
      }

      /* used for input labels */
      .aria-visible-only {
        /* position: absolute !important; */
        width: 1px !important;
        height: 1px !important;
        overflow: hidden !important;
        white-space: nowrap !important;
        opacity:0 !important;
      }
      /* tooltip styles for clear btn */
      .custom-tooltip {
        --bs-tooltip-bg: orange;
        --bs-tooltip-color: black;
      }
      .tooltip-inner {
        /* the element within the tooltip that contains the text */
        text-align: left !important;
      }
    </style>

    <!-- LaTex: feature -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>

    <!-- markdown feature: open to XSS attacks!! -->
    <!-- https://showdownjs.com/docs/xss/ -->
    <script src="https://unpkg.com/showdown/dist/showdown.min.js"></script>

    <!-- mermaid feature -->
    <script async src="https://cdn.jsdelivr.net/npm/mermaid@9/dist/mermaid.min.js"></script>

    <!-- <script defer src="//cdn.jsdelivr.net/npm/pouchdb@8.0.1/dist/pouchdb.min.js"></script> -->
    <!-- <script defer src="https://unpkg.com/browse/pouchdb@8.0.1/dist/pouchdb.find.min.js"></script> -->
    <script defer src="//cdn.jsdelivr.net/npm/pouchdb@8.0.1/dist/pouchdb.js"></script>
    <!-- <script defer src="https://unpkg.com/browse/pouchdb@8.0.1/dist/pouchdb.find.js" type="application/javascript"></script> -->
    <script defer src="/static/js/db.js" type="text/javascript"></script>
    <script defer src="/static/js/dbActions.js" type="text/javascript"></script>
    <script defer src="/static/js/dbActionsBuild.js" type="text/javascript"></script>
    <script defer src="/static/js/darkmode.js" type="text/javascript"></script>
  </head>
  <body class="">
    <div
      class="container d-flex flex-column justify-content-between vh-100 overflow-x-wrap"
    >
      <header class="">
        <h1 class="text-center text-primary mt-5 pt-4 pt-sm-5">Flashcard Builder</h1>

        <!-- https://getbootstrap.com/docs/5.3/components/navbar/#offcanvas -->
        <nav class="navbar bg-body-tertiary fixed-top">
          <div class="container">
            <!-- container-fluid -->
            <!-- Fluid => brand-logo|hamburger => space-between vw vs. space-between container -->

            <!-- Brand logo: left -->
            <a class="navbar-brand fs-3" href="#">Study<span class="outlined-text">Pal</span></a>

            <!-- hamburger menu button -->
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasNavbar"
              aria-controls="offcanvasNavbar"
              aria-label="Toggle navigation"
            >
              <!-- hamburger icon -->
              <span class="navbar-toggler-icon"></span>
            </button>

            <!-- offcanvas container -->
            <div
              class="offcanvas offcanvas-end"
              tabindex="-1"
              id="offcanvasNavbar"
              aria-labelledby="offcanvasNavbarLabel"
            >
              <div class="offcanvas-header">
                <h5 class="offcanvas-title fs-3" id="offcanvasNavbarLabel">
                  Study<span class="outlined-text">Pal</span>
                </h5>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="offcanvas"
                  aria-label="Close"
                ></button>
              </div>
              <!-- end offcanvas header -->

              <div class="offcanvas-body">
                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                  <li class="nav-item">

                    <!-- Set href for webpages! -->
                    <a class="nav-link active" aria-current="page" href="#"
                      >
                      <!-- https://icons.getbootstrap.com/ -->
                      <!-- door:icon -->
                      <!-- <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-door-open" viewBox="0 0 16 16">
                        <path d="M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1"/>
                        <path d="M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117M11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5M4 1.934V15h6V1.077z"/>
                      </svg> -->
                      <!-- house:icon -->
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-heart" viewBox="0 0 16 16">
                        <path d="M8 6.982C9.664 5.309 13.825 8.236 8 12 2.175 8.236 6.336 5.309 8 6.982"/>
                        <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.707L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.646a.5.5 0 0 0 .708-.707L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
                      </svg>
                      <span class="ps-1">Home</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="flashcard-review.html"
                      >
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cup-hot-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M.5 6a.5.5 0 0 0-.488.608l1.652 7.434A2.5 2.5 0 0 0 4.104 16h5.792a2.5 2.5 0 0 0 2.44-1.958l.131-.59a3 3 0 0 0 1.3-5.854l.221-.99A.5.5 0 0 0 13.5 6zM13 12.5a2 2 0 0 1-.316-.025l.867-3.898A2.001 2.001 0 0 1 13 12.5"/>
                        <path d="m4.4.8-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 3.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 3.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 3 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 4.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 6.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 6.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 6 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 7.4.8m3 0-.003.004-.014.019a4 4 0 0 0-.204.31 2 2 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.6.6 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3 3 0 0 1-.202.388 5 5 0 0 1-.252.382l-.019.025-.005.008-.002.002A.5.5 0 0 1 9.6 4.2l.003-.004.014-.019a4 4 0 0 0 .204-.31 2 2 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.6.6 0 0 0-.09-.252A4 4 0 0 0 9.6 2.8l-.01-.012a5 5 0 0 1-.37-.543A1.53 1.53 0 0 1 9 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a6 6 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 10.4.8"/>
                      </svg>
                      <span class="ps-1">Study flashcards</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="flashcard-builder.html"
                      >
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-database-fill-add" viewBox="0 0 16 16">
                        <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0M8 1c-1.573 0-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4s.875 1.755 1.904 2.223C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777C13.125 5.755 14 5.007 14 4s-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1"/>
                        <path d="M2 7v-.839c.457.432 1.004.751 1.49.972C4.722 7.693 6.318 8 8 8s3.278-.307 4.51-.867c.486-.22 1.033-.54 1.49-.972V7c0 .424-.155.802-.411 1.133a4.51 4.51 0 0 0-4.815 1.843A12 12 0 0 1 8 10c-1.573 0-3.022-.289-4.096-.777C2.875 8.755 2 8.007 2 7m6.257 3.998L8 11c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V10c0 1.007.875 1.755 1.904 2.223C4.978 12.711 6.427 13 8 13h.027a4.55 4.55 0 0 1 .23-2.002m-.002 3L8 14c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V13c0 1.007.875 1.755 1.904 2.223C4.978 15.711 6.427 16 8 16c.536 0 1.058-.034 1.555-.097a4.5 4.5 0 0 1-1.3-1.905"/>
                      </svg>
                      <span class="ps-1">Build flashcards</span>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#"
                      >
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-diagram-3-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M6 3.5A1.5 1.5 0 0 1 7.5 2h1A1.5 1.5 0 0 1 10 3.5v1A1.5 1.5 0 0 1 8.5 6v1H14a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 2 7h5.5V6A1.5 1.5 0 0 1 6 4.5zm-6 8A1.5 1.5 0 0 1 1.5 10h1A1.5 1.5 0 0 1 4 11.5v1A1.5 1.5 0 0 1 2.5 14h-1A1.5 1.5 0 0 1 0 12.5zm6 0A1.5 1.5 0 0 1 7.5 10h1a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 8.5 14h-1A1.5 1.5 0 0 1 6 12.5zm6 0a1.5 1.5 0 0 1 1.5-1.5h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1a1.5 1.5 0 0 1-1.5-1.5z"/>
                      </svg>
                      <span class="ps-1">Category tags</span>
                    </a>
                  </li>
                  <li class="nav-item dropdown">
                    <a
                      class="nav-link dropdown-toggle"
                      href="#"
                      role="button"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                    >
                      More...
                    </a>
                    <ul class="dropdown-menu">
                      <li>
                        <a class="dropdown-item" href="#"
                         >
                         <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-graph-up-arrow" viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M0 0h1v15h15v1H0zm10 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4.9l-3.613 4.417a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61L13.445 4H10.5a.5.5 0 0 1-.5-.5"/>
                        </svg>
                         <span class="ps-1">Flashcard Statistics</span>
                        </a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="#"
                          >
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hammer" viewBox="0 0 16 16">
                            <path d="M9.972 2.508a.5.5 0 0 0-.16-.556l-.178-.129a5 5 0 0 0-2.076-.783C6.215.862 4.504 1.229 2.84 3.133H1.786a.5.5 0 0 0-.354.147L.146 4.567a.5.5 0 0 0 0 .706l2.571 2.579a.5.5 0 0 0 .708 0l1.286-1.29a.5.5 0 0 0 .146-.353V5.57l8.387 8.873A.5.5 0 0 0 14 14.5l1.5-1.5a.5.5 0 0 0 .017-.689l-9.129-8.63c.747-.456 1.772-.839 3.112-.839a.5.5 0 0 0 .472-.334"/>
                          </svg>
                          <span class="ps-1">Developer</span>
                        </a>
                      </li>
                      <li>
                        <hr class="dropdown-divider" />
                      </li>
                      <li>
                        <a class="dropdown-item" href="#"
                          >
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                            <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
                            <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"/>
                          </svg>
                          <span class="ps-1">Settings</span>
                        </a>
                      </li>
                      <li class="dropdown-item">
                        <!-- https://getbootstrap.com/docs/5.3/forms/checks-radios/#switches -->
                          <div class="form-check form-switch d-flex justify-content-between ps-0">
                            <div>
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-moon-stars" viewBox="0 0 16 16">
                                <path d="M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278M4.858 1.311A7.27 7.27 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.32 7.32 0 0 0 5.205-2.162q-.506.063-1.029.063c-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286"/>
                                <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.73 1.73 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.73 1.73 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.73 1.73 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"/>
                              </svg>
                              <label class="form-check-label ps-1" for="darkmode-toggler" aria-label="Dark mode toggler" id="darkmode-toggle-label">Dark mode</label>
                            </div>

                            <input class="form-check-input" type="checkbox" role="switch" id="darkmode-toggler" aria-labelledby="darkmode-toggle-label" aria-live="polite" checked>
                          </div>
                      </li>
                      <li>
                        <hr class="dropdown-divider" />
                      </li>
                      <li>
                        <a class="dropdown-item" href="#"
                          >
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-fingerprint" viewBox="0 0 16 16">
                            <path d="M8.06 6.5a.5.5 0 0 1 .5.5v.776a11.5 11.5 0 0 1-.552 3.519l-1.331 4.14a.5.5 0 0 1-.952-.305l1.33-4.141a10.5 10.5 0 0 0 .504-3.213V7a.5.5 0 0 1 .5-.5Z"/>
                            <path d="M6.06 7a2 2 0 1 1 4 0 .5.5 0 1 1-1 0 1 1 0 1 0-2 0v.332q0 .613-.066 1.221A.5.5 0 0 1 6 8.447q.06-.555.06-1.115zm3.509 1a.5.5 0 0 1 .487.513 11.5 11.5 0 0 1-.587 3.339l-1.266 3.8a.5.5 0 0 1-.949-.317l1.267-3.8a10.5 10.5 0 0 0 .535-3.048A.5.5 0 0 1 9.569 8m-3.356 2.115a.5.5 0 0 1 .33.626L5.24 14.939a.5.5 0 1 1-.955-.296l1.303-4.199a.5.5 0 0 1 .625-.329"/>
                            <path d="M4.759 5.833A3.501 3.501 0 0 1 11.559 7a.5.5 0 0 1-1 0 2.5 2.5 0 0 0-4.857-.833.5.5 0 1 1-.943-.334m.3 1.67a.5.5 0 0 1 .449.546 10.7 10.7 0 0 1-.4 2.031l-1.222 4.072a.5.5 0 1 1-.958-.287L4.15 9.793a9.7 9.7 0 0 0 .363-1.842.5.5 0 0 1 .546-.449Zm6 .647a.5.5 0 0 1 .5.5c0 1.28-.213 2.552-.632 3.762l-1.09 3.145a.5.5 0 0 1-.944-.327l1.089-3.145c.382-1.105.578-2.266.578-3.435a.5.5 0 0 1 .5-.5Z"/>
                            <path d="M3.902 4.222a5 5 0 0 1 5.202-2.113.5.5 0 0 1-.208.979 4 4 0 0 0-4.163 1.69.5.5 0 0 1-.831-.556m6.72-.955a.5.5 0 0 1 .705-.052A4.99 4.99 0 0 1 13.059 7v1.5a.5.5 0 1 1-1 0V7a3.99 3.99 0 0 0-1.386-3.028.5.5 0 0 1-.051-.705M3.68 5.842a.5.5 0 0 1 .422.568q-.044.289-.044.59c0 .71-.1 1.417-.298 2.1l-1.14 3.923a.5.5 0 1 1-.96-.279L2.8 8.821A6.5 6.5 0 0 0 3.058 7q0-.375.054-.736a.5.5 0 0 1 .568-.422m8.882 3.66a.5.5 0 0 1 .456.54c-.084 1-.298 1.986-.64 2.934l-.744 2.068a.5.5 0 0 1-.941-.338l.745-2.07a10.5 10.5 0 0 0 .584-2.678.5.5 0 0 1 .54-.456"/>
                            <path d="M4.81 1.37A6.5 6.5 0 0 1 14.56 7a.5.5 0 1 1-1 0 5.5 5.5 0 0 0-8.25-4.765.5.5 0 0 1-.5-.865m-.89 1.257a.5.5 0 0 1 .04.706A5.48 5.48 0 0 0 2.56 7a.5.5 0 0 1-1 0c0-1.664.626-3.184 1.655-4.333a.5.5 0 0 1 .706-.04ZM1.915 8.02a.5.5 0 0 1 .346.616l-.779 2.767a.5.5 0 1 1-.962-.27l.778-2.767a.5.5 0 0 1 .617-.346m12.15.481a.5.5 0 0 1 .49.51c-.03 1.499-.161 3.025-.727 4.533l-.07.187a.5.5 0 0 1-.936-.351l.07-.187c.506-1.35.634-2.74.663-4.202a.5.5 0 0 1 .51-.49"/>
                          </svg>
                          <span class="ps-1">Login | Logout</span>
                        </a>
                      </li>
                    </ul>
                  </li>
                </ul>
                <form class="d-flex mt-3" role="search" id="search">
                  <input
                    spellcheck="true"
                    class="form-control me-2"
                    type="search"
                    id="input-search"
                    name="input-search"
                    placeholder="Search flashcard question (regex)"
                    aria-label="Search flashcard question"
                  />
                  <button class="btn btn-outline-success" type="submit" id="btn-search">
                    Search
                    <span id="record-count" data-count="0"></span>
                  </button>
                </form>
                <div class="mt-2">
                  <!-- https://getbootstrap.com/docs/5.3/forms/checks-radios/#switches -->
                  <div class="form-check form-switch d-flex justify-content-between ps-0">
                    <div>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"/>
                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0"/>
                      </svg>
                      <label class="form-check-label ps-1" for="descending-toggler" aria-label="Descending flashcard results toggler" id="descending-toggle-label">Most Recent First</label>
                    </div>

                    <input class="form-check-input" type="checkbox" role="switch" id="descending-toggler" aria-labelledby="descending-toggle-label" aria-live="polite" checked>
                  </div>
                  <ul id="search-results" role="list" aria-label="Search Results"></ul>
                </div>
              </div>
            </div>
          </div>
        </nav>
      </header>
      <main>
        <section class="">
          <h2 class="text-center text-secondary">Data Entry</h2>

          <!-- <form name="builder" class="d-flex flex-column" enctype="multipart/form-data" method="post"> -->
          <form id="builder" class="d-flex flex-column">
            <div>
              <!-- Tabs for front||back of flashcard -->
              <!-- https://getbootstrap.com/docs/5.3/components/navs-tabs/#javascript-behavior -->
              <ul class="nav nav-tabs" id="myTab" role="tablist">
                <!-- Tab head -->
                <!-- Query: front -->
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link active"
                    id="question-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#question-tab-pane"
                    type="button"
                    aria-label="Question Tab"
                    role="tab"
                    aria-controls="question-tab-pane"
                    aria-selected="true"
                    >
                    <label for="input-question">Question</label>
                  </button>
                </li>
                <!-- Answer: back -->
                <!-- dropdown: https://getbootstrap.com/docs/5.3/components/navs-tabs/#tabs-with-dropdowns -->
                <!-- Pre-modification: <li class="nav-item dropdown"></li> -->
                <li class="nav-item dropdown" role="presentation">
                  <!-- Pre-modification: <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">Dropdown</a> -->
                  <button
                    class="nav-link dropdown-toggle"
                    id="answer-tab"
                    data-bs-toggle="dropdown"
                    href="#"
                    type="button"
                    aria-label="Answer Dropdown Options Tab"
                    role="tab"
                    aria-controls=""
                    aria-expanded="false"
                    aria-selected="false"
                  >
                    Answer
                  </button>
                  <ul class="dropdown-menu">
                    <!-- Pre-modification: <li><a class="dropdown-item" href="#">Action</a></li> -->
                    <li
                      class="dropdown-item"
                      id="text-answer-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#answer-tab-pane"
                      aria-controls="answer-tab-pane"
                    >
                      <a>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-keyboard" viewBox="0 0 16 16">
                          <path d="M14 5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zM2 4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/>
                          <path d="M13 10.25a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm0-2a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm-5 0A.25.25 0 0 1 8.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 8 8.75zm2 0a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25zm1 2a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm-5-2A.25.25 0 0 1 6.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 6 8.75zm-2 0A.25.25 0 0 1 4.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 4 8.75zm-2 0A.25.25 0 0 1 2.25 8h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 2 8.75zm11-2a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm-2 0a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm-2 0A.25.25 0 0 1 9.25 6h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 9 6.75zm-2 0A.25.25 0 0 1 7.25 6h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 7 6.75zm-2 0A.25.25 0 0 1 5.25 6h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5A.25.25 0 0 1 5 6.75zm-3 0A.25.25 0 0 1 2.25 6h1.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-1.5A.25.25 0 0 1 2 6.75zm0 4a.25.25 0 0 1 .25-.25h.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-.5a.25.25 0 0 1-.25-.25zm2 0a.25.25 0 0 1 .25-.25h5.5a.25.25 0 0 1 .25.25v.5a.25.25 0 0 1-.25.25h-5.5a.25.25 0 0 1-.25-.25z"/>
                        </svg>
                        <label for="input-answer">
                          <span class="ps-1">Text</span>
                        </label>
                      </a>
                    </li>
                    <li id="image-answer-tab">
                      <a
                        class="dropdown-item"
                        data-bs-toggle="tab"
                        data-bs-target="#answer-image-tab"
                        aria-controls="answer-image-tab-pane"
                        >
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-images" viewBox="0 0 16 16">
                          <path d="M4.502 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"/>
                          <path d="M14.002 13a2 2 0 0 1-2 2h-10a2 2 0 0 1-2-2V5A2 2 0 0 1 2 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v8a2 2 0 0 1-1.998 2M14 2H4a1 1 0 0 0-1 1h9.002a2 2 0 0 1 2 2v7A1 1 0 0 0 15 11V3a1 1 0 0 0-1-1M2.002 4a1 1 0 0 0-1 1v8l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71a.5.5 0 0 1 .577-.094l1.777 1.947V5a1 1 0 0 0-1-1z"/>
                        </svg>
                        <label for="input-image">
                          <span class="ps-1">Image</span>
                        </label>
                      </a>
                    </li>
                    <li id="audio-answer-tab">
                      <a
                        class="dropdown-item"
                        data-bs-toggle="tab"
                        data-bs-target="#answer-audio-tab"
                        aria-controls="answer-audio-tab-pane"
                        >
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mic-fill" viewBox="0 0 16 16">
                          <path d="M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0z"/>
                          <path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5"/>
                        </svg>
                        <label for="input-audio">
                          <span class="ps-1">Audio</span>
                        </label>
                      </a>
                    </li>
                    <li class="dropdown-item">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-camera-video" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2zm11.5 5.175 3.5 1.556V4.269l-3.5 1.556zM2 4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h7.5a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1z"/>
                      </svg>
                      <span class="ps-1">Video</span>
                      <ul class="drop-menu">
                        <li id="video-local-answer-tab">
                          <a
                            class="dropdown-item ps-1"
                            data-bs-toggle="tab"
                            data-bs-target="#answer-video-tab"
                            aria-controls="answer-video-tab-pane"
                            >
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder-plus" viewBox="0 0 16 16">
                              <path d="m.5 3 .04.87a2 2 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2m5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19q-.362.002-.683.12L1.5 2.98a1 1 0 0 1 1-.98z"/>
                              <path d="M13.5 9a.5.5 0 0 1 .5.5V11h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V12h-1.5a.5.5 0 0 1 0-1H13V9.5a.5.5 0 0 1 .5-.5"/>
                            </svg>
                            <label for="upload-video-btn">
                            <!-- <label for="input-video"> -->
                              <span class="ps-1">Local</span>
                            </label>
                          </a>
                        </li>
                        <li id="video-youtube-answer-tab">
                          <a
                            class="dropdown-item ps-1"
                            data-bs-toggle="tab"
                            data-bs-target="#answer-video-youtube-tab"
                            aria-controls="answer-video-youtube-tab-pane"
                            >
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-btn" viewBox="0 0 16 16">
                              <path d="M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814z"/>
                              <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1z"/>
                            </svg>
                            <label for="input-youtube">
                            <!-- <label for="input-video-youtube"> -->
                              <span class="ps-1">YouTube</span>
                            </label>
                          </a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <!-- <li class="nav-item ms-auto" role="presentation"> -->
                <li class="ms-auto align-self-end" role="presentation">
                  <button class="btn btn-warning px-2 px-sm-3" 
                    id="question-clear-btn" type="button"
                    aria-label="Clear textarea for question input"
                    >
                    Clear
                  </button>
                </li>
                <li class="ms-auto align-self-end d-none" role="presentation">
                  <button class="btn btn-warning px-2 px-sm-3" 
                    id="fragment-clear-btn" type="button"
                    aria-label="Clear textarea for answer and URL fragment inputs"
                    >
                    Clear
                  </button>
                  <!-- data-bs-toggle="tooltip"
                  data-bs-placement="left"
                  data-bs-custom-class="custom-tooltip"
                  data-bs-html="true"
                  data-bs-title="" -->
                  <!-- data-bs-title="<u>Answer tab</u><br><b>click</b>: Clears textarea & fragment sub-components. <b>dblclick</b>: Clears Source URL & Link name." -->
                </li>
              </ul>
              <!-- Tab body -->
              <div class="tab-content" id="myTabContent">
                <!-- Question body: front -->
                <!-- <div class="tab-pane fade show active" id="question-tab-pane" role="tabpanel" aria-labelledby="question-tab" tabindex="0"> -->
                <div
                  class="tab-pane fade show active"
                  id="question-tab-pane"
                  role="tabpanel"
                  aria-labelledby="question-tab"
                  tabindex="0"
                >

                  <div class="form-floating">
                    <textarea
                      class="w-100 h-100 form-control"
                      name="input-question"
                      id="input-question"
                      cols="33"
                      rows="10"
                      spellcheck="true"></textarea>
                    <label for="input-question">Enter Question text...</label>
                  </div>

                  <div id="latex-question-output"></div>

                </div>

                <!-- Answer body: back -->
                <!-- input: text -->
                <div
                  class="tab-pane fade"
                  id="answer-tab-pane"
                  role="tabpanel"
                  aria-labelledby="text-answer-tab"
                  tabindex="0">
                
                  <!-- textarea: Regular -->
                  <div class="form-floating" id="input-answer-container">
                    <!-- div.form-floating: used to float label inside textarea; don't forget to </div> -->
                    <textarea
                      class="w-100 h-100 form-control"
                      name="input-answer"
                      id="input-answer"
                      cols="33"
                      rows="10"
                      spellcheck="true"></textarea>
                      <!-- label must come After textarea! for inserting/floating label INSIDE textarea. -->
                    <label for="input-answer">Enter Regular text...</label>
                  </div>
                  <!-- textarea: Markdown -->
                  <div class="form-floating d-none" id="input-answer-markdown-container">
                    <textarea
                      class="w-100 h-100 form-control"
                      name="input-answer-markdown"
                      id="input-answer-markdown"
                      cols="33"
                      rows="10"
                      spellcheck="true"></textarea>
                    <label for="input-answer-markdown">Enter Markdown text...</label>
                  </div>
                  <!-- textarea: LaTex -->
                  <div class="form-floating d-none" id="input-answer-latex-container">
                    <textarea
                      class="w-100 h-100 form-control"
                      name="input-answer-latex"
                      id="input-answer-latex"
                      cols="33"
                      rows="10"
                      spellcheck="true"></textarea>
                    <label for="input-answer-latex">Enter LaTex text...</label>
                  </div>
                  <!-- textarea: Mermaid -->
                  <div class="form-floating d-none" id="input-answer-mermaid-container">
                    <textarea
                      class="w-100 h-100 form-control"
                      name="input-answer-mermaid"
                      id="input-answer-mermaid"
                      cols="33"
                      rows="10"
                      spellcheck="true"></textarea>
                    <label for="input-answer-mermaid">Enter Mermaid text...</label>
                  </div>
                  <!-- textarea: Webpage -->
                  <div class="form-floating d-none" id="input-answer-webpage-container">
                    <!-- name="input-answer-webpage" -->
                    <textarea
                      class="w-100 h-100 form-control"
                      id="input-answer-webpage"
                      cols="33"
                      rows="10"
                      spellcheck="true"></textarea>
                    <label for="input-answer-webpage">Enter Webpage text...</label>
                  </div>

                  <!-- conditional input options for fragment identifier linked webpage -->
                  <div id="fragment-container" role="group" aria-roledescription="A container clustering inputs for building a webpage url with a fragment id slug that targets specific text in a webpage for highlighting." class="d-flex flex-wrap position-relative d-none">

                    <!-- no need to aggregate components. Only need final <a>. -->
                    <input required class="d-none" name="input-answer-webpage-anchor" type="text" id="input-answer-webpage-anchor">
                    
                    <label for="fragment-domain" class="position-absolute aria-visible-only">Webpage URL</label>
                    <input required class="form-control w-50" type="text" id="fragment-domain" placeholder="Source URL" spellcheck="true">
                    <label for="fragment-name" class="position-absolute aria-visible-only">Name link [optional]</label>
                    <input class="form-control w-50" type="text" id="fragment-name" placeholder="Name link [optional]" spellcheck="true">
                    <label for="fragment-prefix" class="position-absolute aria-visible-only">Prefix [optional]</label>
                    <input class="form-control w-50" type="text" id="fragment-prefix" placeholder="prefix [optional]" spellcheck="true">
                    <label for="fragment-suffix" class="position-absolute aria-visible-only">Suffix [optional]</label>
                    <input class="form-control w-50" type="text" id="fragment-suffix" placeholder="suffix [optional]" spellcheck="true">
                    <label for="fragment-textStart" class="position-absolute aria-visible-only">textStart</label>
                    <input required class="form-control w-50" type="text" id="fragment-textStart" placeholder="textStart" spellcheck="true">
                    <label for="fragment-textEnd" class="position-absolute aria-visible-only">textEnd [optional]</label>
                    <input class="form-control w-50" type="text" id="fragment-textEnd" placeholder="textEnd [optional]" spellcheck="true">

                    <!-- <label for="fragment-domain" class="position-absolute aria-visible-only">Webpage URL</label>
                    <input required class="form-control w-50" type="text" name="fragment-domain" id="fragment-domain" placeholder="Source URL" spellcheck="true">
                    <label for="fragment-name" class="position-absolute aria-visible-only">Name link [optional]</label>
                    <input class="form-control w-50" type="text" name="fragment-name" id="fragment-name" placeholder="Name link [optional]" spellcheck="true">
                    <label for="fragment-prefix" class="position-absolute aria-visible-only">Prefix [optional]</label>
                    <input class="form-control w-50" type="text" name="fragment-prefix" id="fragment-prefix" placeholder="prefix [optional]" spellcheck="true">
                    <label for="fragment-suffix" class="position-absolute aria-visible-only">Suffix [optional]</label>
                    <input class="form-control w-50" type="text" name="fragment-suffix" id="fragment-suffix" placeholder="suffix [optional]" spellcheck="true">
                    <label for="fragment-textStart" class="position-absolute aria-visible-only">textStart</label>
                    <input required class="form-control w-50" type="text" name="fragment-textStart" id="fragment-textStart" placeholder="textStart" spellcheck="true">
                    <label for="fragment-textEnd" class="position-absolute aria-visible-only">textEnd [optional]</label>
                    <input class="form-control w-50" type="text" name="fragment-textEnd" id="fragment-textEnd" placeholder="textEnd [optional]" spellcheck="true"> -->
                  </div>


                  <!-- radio selector for LaTex | markdown -->
                  <div class="radio-text-format mb-2" role="radiogroup" aria-label="Select what type of text you will enter">
                    <!-- regular: radio -->
                    <div class="form-check form-check-inline">
                      <input
                        name="inlineRadioOptions"
                        checked
                        class="form-check-input"
                        type="radio"
                        id="inlineRadio-regular"
                        value="regularText"
                        aria-controls="input-answer-container"
                      />
                      <label 
                        class="form-check-label" 
                        for="inlineRadio-regular"
                        >
                        Regular
                      </label>
                    </div>

                    <!-- markdown: radio -->
                    <div class="form-check form-check-inline">
                      <input
                        name="inlineRadioOptions"
                        class="form-check-input"
                        type="radio"
                        id="inlineRadio-markdown"
                        value="markdownText"
                        aria-controls="input-answer-markdown-container"
                      />
                      <label
                        class="form-check-label"
                        for="inlineRadio-markdown"
                        >Markdown</label
                      >

                      <!-- Modal button: markdown -->
                      <div class="d-inline" rol="button"  data-bs-toggle="modal" data-bs-target="#modal-markdown">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                          <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
                        </svg>
                      </div>

                      <!-- Modal -->
                      <div class="modal fade" id="modal-markdown" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="modal-markdown-label" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">

                            <div class="modal-header">
                              <h1 class="modal-title fs-5" id="modal-markdown-label">Markdown Resource</h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <!-- Scrollable modal -->
                            <div class="modal-dialog modal-dialog-scrollable">
                              <div class="p-4">
                                <div>
                                  <div>
                                    <p>
                                      <span class="text-danger">Warning:</span>
                                      Markdown opens you up to XSS (Cross-site scripting) attacks!
                                      <span class="text-danger">Use at your own risk.</span>
                                    </p>
                                  </div>
                                  
                                  <div>
                                    <h5>Try Me</h5>
                                    <pre class="mb-0">
- First item
- Second item
- Third item
    - Indented item
    - Indented item
- Fourth item
                                    </pre>
                                  </div>
                                  <div>
                                    <h5>Try Me</h5>
                                    <pre class="mb-0">
| Fruit  | Quantity |
|--------|----------|
| Apple  | 10       |
| Banana | 15       |
| Orange | 20       |               
                                    </pre>
                                  </div>
                                  <div>
                                    <h5>Try Me</h5>
                                    <pre class="mb-0">
### Using LaTex in markdown
Add additional backward slash on bracket escape.  
\\[\int_a^b f(\mu) \, d\mu\\]     
                                    </pre>
                                  </div>

                                  <div class="text-warning mb-2">
                                    Not all markdown features are supported.
                                  </div>
                                </div>

                                <div style="pointer-events: all;">
                                  <h3 class="modal-title fs-5">Resource Links</h3>
                                  <hr>
                                  <!-- pointer-events set to "all" enables href in modal, else bs sets to none, and href won't work. -->
                                  <ul>
                                    <li><a href="https://www.markdownguide.org/basic-syntax/" rel="noopener nofollow noreferrer" target="_blank">Basic Syntax</a></li>
                                    <li><a href="https://www.scottspence.com/posts/writing-with-markdown">All I Know About Markdown</a></li>
                                    <li><a href="https://showdownjs.com/docs/markdown-syntax/">Showdown's Markdown syntax</a></li>
                                    <li><a href="https://dev.to/sameerkatija/github-markdown-cheat-sheet-everything-you-need-to-know-to-write-readme-md-2eca" rel="noopener nofollow noreferrer" target="_blank">Everything you need to know...</a></li>
                                    <li><a href="https://github.com/lifeparticle/Markdown-Cheatsheet" rel="noopener nofollow noreferrer" target="_blank">Markdown-Cheatsheet</a></li>
                                    <li><a href="https://paperhive.org/help/markdown" rel="noopener nofollow noreferrer" target="_blank">Markdown cheat sheet</a></li>
                                    <li><a href="https://dev.to/imluka/the-only-markdown-cheatsheet-you-will-ever-need-ccg">The Only Markdown Cheatsheet...</a></li>
                                  </ul>
                                </div>
                              </div>
                            </div>

                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- LaTex: radio -->
                    <div class="form-check form-check-inline">
                      <input
                        name="inlineRadioOptions"
                        class="form-check-input"
                        type="radio"
                        id="inlineRadio-latex"
                        value="latexText"
                        aria-controls="input-answer-latex-container"
                      />
                      <label class="form-check-label" for="inlineRadio-latex"
                        >LaTex</label
                      >
                      <div class="d-inline" rol="button"  data-bs-toggle="modal" data-bs-target="#modal-latex">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                          <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
                        </svg>
                      </div>

                      <!-- Modal -->
                      <div class="modal fade" id="modal-latex" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="modal-latex-label" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">

                            <div class="modal-header">
                              <h1 class="modal-title fs-5" id="modal-latex-label">LaTex Resource</h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <!-- Scrollable modal -->
                            <div class="modal-dialog modal-dialog-scrollable">
                              <div class="p-4">
                                <div>
                                  <div>
                                    <h5>"Bookcase" your LaTex code</h5>
                                    <ul>
                                      <li>Inline code</li>
                                      <ul>
                                        <!-- Note: using "\" to escape special char of "\" and "$". \ and $ literals are desired. -->
                                        <li>\\( ...LaTex Code... \\)</li>
                                      </ul>
                                      <li>Block code
                                        <ul>
                                          <li>\\[ ...LaTex Code... \\]</li>
                                          <li>\$$ ...LaTex Code... \$$</li>
                                        </ul>
                                      </li>
                                    </ul>
                                  </div>

                                  <div>
                                    <h5>Try Me</h5>
                                    <pre class="mb-0">
\[\int_a^b f(\mu) \, d\mu\]
                                    </pre>
                                  </div>

                                  <div class="text-warning mb-2">
                                    Not all LaTex features are supported.
                                </div>
                                </div>

                                <div style="pointer-events: all;">
                                  <h3 class="modal-title fs-5">Resource Links</h3>
                                  <hr>
                                  <!-- pointer-events set to "all" enables href in modal, else bs sets to none, and href won't work. -->
                                  <ul>
                                    <li><a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference" rel="noopener nofollow noreferrer" target="_blank">MathJax basic tutorial and quick reference</a></li>
                                    <li><a href="https://en.wikibooks.org/wiki/LaTeX/Mathematics" rel="noopener nofollow noreferrer" target="_blank">LaTeX/Mathematics Wiki</a></li>
                                    <li><a href="https://paperhive.org/help/markdown#formulas" rel="noopener nofollow noreferrer" target="_blank">Alternative LaTex syntax</a></li>
                                    <li><a href="https://docs.mathjax.org/en/latest/input/tex/index.html" rel="noopener nofollow noreferrer" target="_blank">Tex and LaTex Support</a></li>
                                    <!-- <li><a href="https://dev.to/imluka/the-only-markdown-cheatsheet-you-will-ever-need-ccg">The Only Markdown Cheatsheet...</a></li> -->
                                  </ul>
                                </div>
                              </div>
                            </div>


                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <!-- <button type="button" class="btn btn-primary">Understood</button> -->
                            </div>

                          </div>
                        </div>
                      </div>

                    </div>

                    <!-- Mermaid: radio -->
                    <div class="form-check form-check-inline">
                      <input
                        name="inlineRadioOptions"
                        class="form-check-input"
                        type="radio"
                        id="inlineRadio-mermaid"
                        value="mermaidText"
                        aria-controls="input-answer-mermaid-container"
                      />
                      <label class="form-check-label" for="inlineRadio-mermaid"
                        >Mermaid</label
                      >
                      <div class="d-inline" rol="button"  data-bs-toggle="modal" data-bs-target="#modal-mermaid">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                          <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
                        </svg>
                      </div>

                      <!-- Modal -->
                      <div class="modal fade" id="modal-mermaid" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="modal-mermaid-label" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">

                            <div class="modal-header">
                              <h1 class="modal-title fs-5" id="modal-mermaid-label">Mermaid Resource</h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <!-- Scrollable modal -->
                            <div class="modal-dialog modal-dialog-scrollable">
                              <div class="p-4">
                                <div>

                                  <div>
                                    <p>
                                      <span class="text-danger">Warning:</span>
                                      Markdown opens you up to XSS (Cross-site scripting) attacks!
                                      <span class="text-danger">Use at your own risk.</span>
                                    </p>
                                  </div>

                                  <div>
                                    <h5>Try Me</h5>
                                    <pre>
pie
  title Distribution of Expenses
  "Food" : 60
  "Rent" : 15
  "Entertainment" : 10
  "Savings" : 15
                                    </pre>
                                  </div>
                                  <div>
                                    <h5>Using semi-colons for punctuation</h5>
                                    <div>sequenceDiagram; participant dotcom; participant iframe; participant viewscreen; dotcom->>iframe: loads html w/ iframe url; iframe->>viewscreen: request template; viewscreen->>iframe: html & javascript; iframe->>dotcom: iframe ready; dotcom->>iframe: set mermaid data on iframe; iframe->>iframe: render mermaid;</div>
                                  </div>
                                  <div class="py-3 text-warning">
                                    Not all Mermaid features are supported.
                                  </div>
                                </div>

                                <div style="pointer-events: all;">
                                  <h3 class="modal-title fs-5">Resource Links</h3>
                                  <hr>
                                  <!-- pointer-events set to "all" enables href in modal, else bs sets to none, and href won't work. -->
                                  <ul>
                                    <li><a href="https://mermaid.live/" rel="noopener nofollow noreferrer" target="_blank">Mermaid live editor</a></li>
                                    <li><a href="https://mermaid.js.org/intro/" rel="noopener nofollow noreferrer" target="_blank">Mermaid Docs</a></li>
                                    <li><a href="https://www.freecodecamp.org/news/diagrams-as-code-with-mermaid-github-and-vs-code/" rel="noopener nofollow noreferrer" target="_blank">freeCodeCamp</a></li>
                                    <li><a href="https://youtu.be/JiQmpA474BY?si=Wd9uOKmqUWWkRQmK" rel="noopener nofollow noreferrer" target="_blank">YouTube tutorial</a></li>
                                    <!-- <li><a href="https://dev.to/imluka/the-only-markdown-cheatsheet-you-will-ever-need-ccg">The Only Markdown Cheatsheet...</a></li> -->
                                  </ul>
                                </div>
                              </div>
                            </div>

                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <!-- <button type="button" class="btn btn-primary">Understood</button> -->
                            </div>

                          </div>
                        </div>
                      </div>

                    </div>

                    <!-- Webpage content: radio -->
                    <div class="form-check form-check-inline">
                      <input
                        name="inlineRadioOptions"
                        class="form-check-input"
                        type="radio"
                        id="inlineRadio-webpage"
                        value="fragmentIdentifier"
                        aria-controls="input-answer-webpage-container fragment-container"
                      />
                      <label class="form-check-label" for="inlineRadio-webpage"
                        >Webpage</label
                      >
                      <div class="d-inline" rol="button"  data-bs-toggle="modal" data-bs-target="#modal-webpage">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                          <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
                        </svg>
                      </div>

                      <!-- External AI links -->
                      <a class="ms-3" href="https://chat.openai.com/" target="_blank" rel="noopener noreferrer nofollow">OpenAI</a>
                      <a class="ms-3" href="https://www.bing.com/chat" target="_blank" rel="noopener noreferrer nofollow">Copilot</a>

                      <!-- Modal -->
                      <div class="modal fade" id="modal-webpage" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="modal-webpage-label" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">

                            <div class="modal-header">
                              <h1 class="modal-title fs-5" id="modal-webpage-label">Webpage Resource</h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <!-- Scrollable modal -->
                            <div class="modal-dialog modal-dialog-scrollable">
                              <div class="p-4">
                                <div>

                                  <div>
                                    <p>
                                      <span class="text-danger">Warning:</span>
                                        Because you are linking to content directly in the URL, your privacy is compromised.
                                      <span class="text-danger">Use at your own risk.</span>
                                    </p>
                                    <p>
                                      External data will not be cached. You will need to have a network connection to view data.
                                    </p>
                                    <p>
                                      <span class="text-warning">Note:</span> Hyphens in text will cause highlighting failure.
                                      You may want to use the range option (textStart, textEnd) instead of pasting the text 
                                      directly in the textarea to bypass the hyphen issue.
                                    </p>
                                  </div>

                                  <div>
                                    <h5>Try Me</h5>
                                    <div style="pointer-events: all;">
                                      <h6 class="text-secondary">URL Fragment Text Directives</h6>
                                      <ul>
                                        <li><a href="https://example.com/#:~:text=is%20for%20-,use%20in,example,-s%20in%20documents" rel="nofollow noreferrer noopener" target="_blank">my target content</a></li>
                                        <li><a href="https://www.freecodecamp.org/news/how-you-can-share-links-that-anchor-to-any-text-on-a-webpage/#:~:text=you%20can-,specify,range,-of%20text" rel="nofollow noreferrer noopener" target="_blank">another example</a></li>
                                        <li><a href="https://www.freecodecamp.org/news/how-you-can-share-links-that-anchor-to-any-text-on-a-webpage/#:~:text=for%20longer,issues" rel="nofollow noreferrer noopener" target="_blank">yet another example</a></li>
                                        <li><a href="https://www.freecodecamp.org/news/how-you-can-share-links-that-anchor-to-any-text-on-a-webpage/#:~:text=Text fragments are not available in Firefox at all yet" rel="nofollow noreferrer noopener" target="_blank">last example</a></li>
                                      </ul>
                                    </div>
                                  </div>

                                  <div class="py-3 text-warning">
                                    Works on <span class="text-success">Chromium</span> (<span class="text-success">Chrome</span> and <span class="text-success">Edge</span>). Does not work on <span class="text-danger">Firefox</span>.
                                  </div>
                                </div>

                                <div style="pointer-events: all;">
                                  <!-- pointer-events set to "all" enables href in modal, else bs sets to none, and href won't work. -->
                                  <h3 class="modal-title fs-5">Resource Links</h3>
                                  <hr>
                                  <ul>
                                    <li><a href="https://www.freecodecamp.org/news/how-you-can-share-links-that-anchor-to-any-text-on-a-webpage/" rel="noopener nofollow noreferrer" target="_blank">How to... Anchor to Any Text on a Webpage</a></li>
                                    <li><a href="https://wicg.github.io/scroll-to-text-fragment/" rel="noopener nofollow noreferrer" target="_blank">URL Fragment Text Directives</a></li>
                                  </ul>
                                </div>
                              </div>
                            </div>

                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <!-- <button type="button" class="btn btn-primary">Understood</button> -->
                            </div>

                          </div>
                        </div>
                      </div>

                    </div>
                  </div>

                  <!-- Visual confirmation for text written textArea -->
                  <div id="container-textarea-confirmation">
                    <!-- textarea confirmation -->
                    <div
                      id="latex-answer-output"
                      class="sp-output-group text-wrap"
                      style="overflow-x: auto;"
                    ></div>
                    <!-- toggle switch -->
                    <div class="form-check form-switch d-flex justify-content-end">
                      <div>
                        <label class="form-check-label ps-1" for="darkmode-toggler-textarea-confirmation" aria-label="Dark mode toggler for confirmation output element" id="darkmode-toggle-textarea-confirmation-label">Dark mode</label>
                        <input class="form-check-input" type="checkbox" role="switch" id="darkmode-toggler-textarea-confirmation" aria-labelledby="darkmode-toggle-textarea-confirmation-label" aria-live="polite" checked>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- input: image -->
                <div
                  class="tab-pane fade mt-2"
                  id="answer-image-tab"
                  role="tabpanel"
                  aria-labelledby="answer-image-tab"
                  tabindex="0"
                >
                  <div class="d-flex justify-content-between">
                    <button
                      class="btn btn-secondary py-0 px-2 py-sm-1 px-sm-5"
                      id="upload-image-btn"
                      type="button"
                    >
                      Choose Image
                    </button>
                    <button
                      class="btn btn-danger py-0 px-2 py-sm-1 px-sm-5"
                      id="cancel-upload-image-btn"
                      type="button"
                    >
                      Cancel
                    </button>
                  </div>
                  <span class="d-block text-wrap" id="file-name-image"
                    >No file selected</span
                  >
                  <div class="d-flex justify-content-center mt-3 form-control">
                    <input
                      class="d-none"
                      type="file"
                      name="input-image"
                      id="input-image"
                      accept="image/*"
                    />
                    <img
                      alt="Uploaded image"
                      id="uploaded-image"
                      class="text-center w-100 h-100"
                    />
                  </div>
                </div>

                <!-- input: audio -->
                <div
                  class="tab-pane fade mt-2"
                  id="answer-audio-tab"
                  role="tabpanel"
                  aria-labelledby="answer-audio-tab"
                  tabindex="0"
                >
                  <div class="d-flex justify-content-between">
                    <button
                      class="btn btn-secondary py-0 px-2 py-sm-1 px-sm-5"
                      id="upload-audio-btn"
                      type="button"
                      aria-label="Choose audio from local filesystem"
                    >
                      Choose Audio
                    </button>
                    <button
                      class="btn btn-danger py-0 px-2 py-sm-1 px-sm-5"
                      id="cancel-upload-audio-btn"
                      type="button"
                      aria-label="Cancel local file audio upload"
                    >
                      Cancel
                    </button>
                  </div>
                  <span class="d-block text-wrap" id="file-name-audio"
                    >No file selected</span
                  >
                  <div class="d-flex justify-content-center mt-3 form-control">
                    <input
                      type="file"
                      class="d-none"
                      name="input-audio"
                      id="input-audio"
                      accept="audio/mpeg,audio/wav,audio/ogg"
                      />
                      <!-- accept="audio/*" -->
                    <audio id="audio-element" controls>
                      <source id="uploaded-audio" src="" type="audio/mpeg" />
                      Your browser does not support the audio element. Upgrade
                      to a modern browser.
                    </audio>
                  </div>
                </div>

                <!-- input: video -->
                <div
                  class="tab-pane fade mt-2"
                  id="answer-video-tab"
                  role="tabpanel"
                  aria-labelledby="answer-video-tab"
                  tabindex="0"
                >
                  <div class="d-flex justify-content-between">
                    <button
                      class="btn btn-secondary py-0 px-2 py-sm-1 px-sm-5"
                      id="upload-video-btn"
                      type="button"
                      aria-label="Choose video from local filesystem"
                    >
                      <label for="input-video">Choose Video</label>
                    </button>
                    <button
                      class="btn btn-danger py-0 px-2 py-sm-1 px-sm-5"
                      id="cancel-upload-video-btn"
                      type="button"
                      aria-label="Cancel local file video upload"
                    >
                      Cancel
                    </button>
                  </div>
                  <span class="d-block text-wrap" id="file-name-video"
                    >No file selected</span
                  >
                  <div class="d-flex justify-content-center mt-3">
                    <input
                      type="file"
                      class="d-none"
                      name="input-video"
                      id="input-video"
                      accept="video/mp4,video/webm,video/ogg"
                    />
                    <!-- firefox: didn't support mp4!; chromium: supports mp4. -->
                    <video id="video-element" controls>
                      <source id="uploaded-video" src="" type="video/mp4" />
                      Your browser does not support the video element. Upgrade
                      to a modern browser.
                    </video>
                  </div>
                </div>
                <!-- YouTube -->
                <div
                  class="tab-pane fade mt-2"
                  id="answer-video-youtube-tab"
                  role="tabpanel"
                  aria-labelledby="answer-video-youtube-tab"
                  tabindex="0"
                >
                  <div class="d-flex justify-content-between">
                    <button
                      class="btn btn-success py-0 px-2 py-sm-1 px-sm-5"
                      id="set-youtube-url"
                      type="button"
                      aria-label="Set YouTube link from iframe"
                    >
                      Set Link
                    </button>

                    <div>
                      <button
                        class="btn btn-warning py-0 px-2 py-sm-1 px-sm-5"
                        id="youtube-clear-input-btn"
                        type="button"
                        aria-label="Clear source input field"
                      >
                        Clear
                      </button>
                      <button
                        class="btn btn-danger py-0 px-2 py-sm-1 px-sm-5"
                        id="cancel-upload-video-youtube-btn"
                        type="button"
                        aria-label="Cancel linked YouTube video"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>

                  <div class="input-group pt-2">
                    <span
                      class="input-group-text"
                      id="input-youtube-label"
                      title="Paste iframe code here.&#10; Then Set link."
                    >
                      <label for="input-youtube" id="youtube-input-group-text"
                        >iframe</label
                      >
                    </span>
                    <input
                      class="form-control"
                      type="text"
                      name="input-youtube"
                      id="input-youtube"
                      aria-label="YouTube URL"
                      aria-describedby="input-youtube-label"
                      placeholder="share>embed>copy <start:checked[optional]"
                    />
                    <!-- <label for="input-youtube">URL</label> -->
                    <!-- <input type="text" name="input-youtube" id="input-youtube"> -->
                  </div>

                  <!-- <span class="d-block text-wrap" id="file-name-video-youtube">No file selected</span> -->
                  <div class="d-flex justify-content-center mt-3">
                    <!-- width="560" height="315" -->
                    <iframe
                      id="iframe-youtube"
                      title="YouTube embedded src link."
                      loading="lazy"
                      src=""
                      allowfullscreen
                    >
                    </iframe>
                    <!-- 
                          Forbidden url src: (You can't use the vanilla youtube link! Must use an embedded link.)
                              src="https://youtu.be/omWmWu1XO8U?si=RDFRzbfTf48IaCV_&t=96"

                          Allowed url src: ( Must use "share">"embed">"copy"> start:checked[optional] )
                              with start:
                                  src="https://www.youtube.com/embed/omWmWu1XO8U?si=gLK6nzBirmX0DvlH&amp;start=96"
                                  src="https://www.youtube.com/embed/omWmWu1XO8U?si=gLK6nzBirmX0DvlH&start=96"
                              without start:
                                  src="https://www.youtube.com/embed/omWmWu1XO8U?si=XVdvDSc1zFNN4qvx"
                      -->
                  </div>
                </div>
              </div>
              <!-- End of Answer panel tab container. #myTabContent -->

              <div>
                <!-- Tags -->

                <!-- Tag confirmation display -->
                <div id="tag-confirmation-container" class="d-flex flex-wrap gap-2 py-2"></div>

                <!-- Tag Entry -->
                <label for="tags" class="d-flex flex-column mt-3 form-label">
                  Flashcard category tags
                  <input
                    required
                    name="tags"
                    id="tags"
                    class="form-control"
                    type="text"
                    placeholder="Ex: math,multiplication"
                    spellcheck="true"
                  />
                </label>
              </div>
            </div>

            <!-- align-self-stretch is for mobile; d-sm-flex enables mx-sm-auto for >=tablet -->
            <button
              id="create-btn"
              type="submit"
              class="btn btn-md btn-success mt-4 align-self-stretch justify-content-between d-sm-flex px-sm-5 mx-sm-auto"
            >
              Create
              <span class="ms-2 d-none" id="btn-flashcard-added-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-database-check" viewBox="0 0 16 16">
                  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514"/>
                  <path d="M12.096 6.223A5 5 0 0 0 13 5.698V7c0 .289-.213.654-.753 1.007a4.5 4.5 0 0 1 1.753.25V4c0-1.007-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1s-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4v9c0 1.007.875 1.755 1.904 2.223C4.978 15.71 6.427 16 8 16c.536 0 1.058-.034 1.555-.097a4.5 4.5 0 0 1-.813-.927Q8.378 15 8 15c-1.464 0-2.766-.27-3.682-.687C3.356 13.875 3 13.373 3 13v-1.302c.271.202.58.378.904.525C4.978 12.71 6.427 13 8 13h.027a4.6 4.6 0 0 1 0-1H8c-1.464 0-2.766-.27-3.682-.687C3.356 10.875 3 10.373 3 10V8.698c.271.202.58.378.904.525C4.978 9.71 6.427 10 8 10q.393 0 .774-.024a4.5 4.5 0 0 1 1.102-1.132C9.298 8.944 8.666 9 8 9c-1.464 0-2.766-.27-3.682-.687C3.356 7.875 3 7.373 3 7V5.698c.271.202.58.378.904.525C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777M3 4c0-.374.356-.875 1.318-1.313C5.234 2.271 6.536 2 8 2s2.766.27 3.682.687C12.644 3.125 13 3.627 13 4c0 .374-.356.875-1.318 1.313C10.766 5.729 9.464 6 8 6s-2.766-.27-3.682-.687C3.356 4.875 3 4.373 3 4"/>
                </svg>
              </span>
            </button>
          </form>
        </section>
      </main>
      <footer class="text-center">
        <h3 class="my-3 text-secondary fs-6">StudyPal &copy;2024</h3>
      </footer>
    </div>
    <script>document.getElementById('tags').focus();</script>
    <script>
      // image file buttons: long file names on mobile causes overflow-x-scroll, so re-implement.
      // in addition, choose:re-choosing files leads to no-change thus no event, hence toggle message.
      const fileNameConfirmationText_image =
        document.getElementById("file-name-image");
      const inputElement_image = document.getElementById("input-image");
      const imageElement_upload = document.getElementById("uploaded-image");
      const chooseBtn_image = document.getElementById("upload-image-btn");
      chooseBtn_image.onclick = function () {
        fileNameConfirmationText_image.textContent =
          "You may need to toggle a different file first, if you are bobbing around.";
        fileNameConfirmationText_image.classList.add("text-warning");
        fileNameConfirmationText_image.classList.remove("text-success");

        // wrapper for click pass-thru
        inputElement_image.click();
      };

      let IMAGE_URL = null;
      function revokeImageURL() {
        if (IMAGE_URL) {
          /* IMAGE_URL MUST be the same URL instance to be successfully revoked, hence the global variable.
              Creating a new IMAGE_URL=URL.createObjectURL(file[0]); will be a different instance and will not
              revoke/delete the Blob-url. This will lead to its persistance and thus a memory leak.
          */
          URL.revokeObjectURL(IMAGE_URL);
          IMAGE_URL = null;
          imageElement_upload.src = "";
        }
      }
      inputElement_image.addEventListener("change", function (e) {
        revokeImageURL();

        const file = e.target.files;
        if (file && file[0]) {
          // adds file name below 'Choose file' btn
          fileNameConfirmationText_image.textContent = file[0].name;
          fileNameConfirmationText_image.classList.add("text-success");
          fileNameConfirmationText_image.classList.remove("text-warning");
          // image preview
          IMAGE_URL = URL.createObjectURL(file[0]);
          imageElement_upload.src = IMAGE_URL;
        }
      });

      const cancelBtn_image = document.getElementById(
        "cancel-upload-image-btn"
      );
      cancelBtn_image.addEventListener("click", function (e) {
        fileNameConfirmationText_image.textContent = "No file selected";
        fileNameConfirmationText_image.classList.remove("text-success");
        fileNameConfirmationText_image.classList.remove("text-warning");

        revokeImageURL();
      });

      // Audio selection options:
      const fileNameConfirmationText_audio =
        document.getElementById("file-name-audio");
      const inputElement_audio = document.getElementById("input-audio");
      const sourceElement_audio = document.getElementById("uploaded-audio");
      const chooseBtn_audio = document.getElementById("upload-audio-btn");
      chooseBtn_audio.onclick = function () {
        fileNameConfirmationText_audio.textContent =
          "You may need to toggle a different file first, if you are bobbing around.";
        fileNameConfirmationText_audio.classList.add("text-warning");
        fileNameConfirmationText_audio.classList.remove("text-success");

        // wrapper for click pass-thru
        inputElement_audio.click();
      };
      let AUDIO_URL = null;
      function revokeAudioURL() {
        
        /* AUDIO_URL MUST be the same URL instance to be successfully revoked, hence the global variable.
            Creating a new AUDIO_URL=URL.createObjectURL(file[0]); will be a different instance and will not
            revoke/delete the Blob-url. This will lead to its persistance and thus a memory leak.
        */
        if (AUDIO_URL) {
          URL.revokeObjectURL(AUDIO_URL);
          AUDIO_URL = null;
          sourceElement_audio.src = "";
        }
      }
      inputElement_audio.addEventListener("change", function (e) {
        const file = e.target.files;
        if (file && file[0]) {
          // adds file name below 'Choose file' btn
          // const AUDIO_FILE = file[0];
          // console.log(typeof AUDIO_FILE);
          // console.log(AUDIO_FILE);
          // console.log(new Blob([AUDIO_FILE], {type: AUDIO_FILE.type}));

          fileNameConfirmationText_audio.textContent = file[0].name;
          fileNameConfirmationText_audio.classList.add("text-success");
          fileNameConfirmationText_audio.classList.remove("text-warning");

          // audio preview
          // AUDIO_URL=file[0].name; // this works if the audio file is a sibling to flashcard-builder.html
          AUDIO_URL = URL.createObjectURL(file[0]); // this creates a one-time unique URL that points to the local audio file.
          sourceElement_audio.src = AUDIO_URL;
          const mimeType = file[0].type;
          sourceElement_audio.type = mimeType;

          document.getElementById("audio-element").load();
        }
      });

      const cancelBtn_audio = document.getElementById(
        "cancel-upload-audio-btn"
      );
      cancelBtn_audio.onclick = function (e) {
        fileNameConfirmationText_audio.textContent = "No file selected";
        fileNameConfirmationText_audio.classList.remove("text-success");
        fileNameConfirmationText_audio.classList.remove("text-warning");
        revokeAudioURL();
      };

      // Local Video selection options:
      const fileNameConfirmationText_video =
        document.getElementById("file-name-video");
      const inputElement_video = document.getElementById("input-video");
      const sourceElement_video = document.getElementById("uploaded-video");
      const chooseBtn_video = document.getElementById("upload-video-btn");
      chooseBtn_video.onclick = function () {
        fileNameConfirmationText_video.innerHTML =
          "<span>Supported formats: mp4,webm,ogg.</span><br><span>You may need to toggle a different file first, if you are bobbing around.</span>";
        fileNameConfirmationText_video.classList.add("text-warning");
        fileNameConfirmationText_video.classList.remove("text-success");

        // wrapper for click pass-thru
        // replaced btn text with label for btn-input binding; eliminates need for click pass-thru.
        // inputElement_video.click();
      };
      let VIDEO_URL = null;
      function revokeVideoURL() {
        /* VIDEO_URL MUST be the same URL instance to be successfully revoked, hence the global variable.
                    Creating a new VIDEO_URL=URL.createObjectURL(file[0]); will be a different instance and will not
                    revoke/delete the Blob-url. This will lead to its persistance and thus a memory leak.
                */
        if (VIDEO_URL) {
          URL.revokeObjectURL(VIDEO_URL);
          VIDEO_URL = null;
          sourceElement_video.src = "";
        }
      }
      inputElement_video.addEventListener("change", function (e) {
        const file = e.target.files;
        if (file && file[0]) {
          // adds file name below 'Choose file' btn
          if(navigator.userAgent.includes('Firefox')){
            fileNameConfirmationText_video.innerHTML = `${file[0].name}; <span class='text-danger'>Firefox may not play the video. Use another browser.</span>`;
          }else{
            fileNameConfirmationText_video.textContent = file[0].name;
          }
          fileNameConfirmationText_video.classList.add("text-success");
          fileNameConfirmationText_video.classList.remove("text-warning");

          // video preview
          // VIDEO_URL=file[0].name; // this works if the video file is a sibling to flashcard-builder.html
          VIDEO_URL = URL.createObjectURL(file[0]); // this creates a one-time unique URL that points to the local video file.
          sourceElement_video.src = VIDEO_URL;
          const mimeType = file[0].type;
          sourceElement_video.type = mimeType;
          const mainElement = document.querySelector("main");
          let width = mainElement.offsetWidth;
          if (width > 575) {
            width *= 0.3;
          }
          document.getElementById("video-element").setAttribute("width", width);
          document.getElementById("video-element").load();
          // get dimensions
          // const videoElement=document.createElement('video');
          // videoElement.src=VIDEO_URL;
          // videoElement.addEventListener('loadedmetadata',function(){
          //     console.log('width',this.videoWidth);
          //     console.log('height',this.videoHeight);
          //     let viewportWidth = window.innerWidth;
          //     console.log(viewportWidth);
          //     let mainElement = document.querySelector('main');
          //     let width = mainElement.offsetWidth;
          //     console.log(width);
          // });
        }
      });

      const cancelBtn_video = document.getElementById(
        "cancel-upload-video-btn"
      );
      cancelBtn_video.onclick = function (e) {
        fileNameConfirmationText_video.textContent = "No file selected";
        fileNameConfirmationText_video.classList.remove("text-success");
        fileNameConfirmationText_video.classList.remove("text-warning");
        revokeVideoURL();
      };

      // Create flashcard button
      // const createBtn = document.getElementById("create-btn");
      // createBtn.addEventListener("click", function (e) {
      //   e.preventDefault();

      //   // const blob = inputElement_audio.files[0];
      //   // console.log(blob);

      //   // Memory clean up:
      //   revokeImageURL();
      //   revokeAudioURL();
      //   revokeVideoURL();
      // });

      window.addEventListener("beforeunload", () => {
        // Memory clean up:
        revokeImageURL();
        revokeAudioURL();
        revokeVideoURL();
      });
    </script>

    <script>
      /* YouTube Video setting. */
      const labelYouTubeUrlElem = document.getElementById(
        "youtube-input-group-text"
      );
      const inputYouTubeElem = document.getElementById("input-youtube");
      const inputYouTubeClearBtn = document.getElementById(
        "youtube-clear-input-btn"
      );
      const youTubeCancelBtn = document.getElementById(
        "cancel-upload-video-youtube-btn"
      );
      const setYouTubeUrlBtn = document.getElementById("set-youtube-url");
      const iframeYouTube = document.getElementById("iframe-youtube");
      setYouTubeUrlBtn.onclick = function (e) {
        e.preventDefault();
        const src = getSrc(inputYouTubeElem.value);
        if (src) {
          labelYouTubeUrlElem.innerText = "URL";
          inputYouTubeElem.value = src;
          iframeYouTube.src = src;
          // iframeYouTube.load(); // throws console.err
          return;
        }
        labelYouTubeUrlElem.innerText = "iframe";
        console.log("Paste the YouTube iframe code into the input box.");
      };
      inputYouTubeClearBtn.onclick = function (e) {
        e.preventDefault();
        inputYouTubeElem.value = "";
        labelYouTubeUrlElem.innerText = "iframe";
      };
      youTubeCancelBtn.onclick = function (e) {
        e.preventDefault();
        inputYouTubeElem.value = "";
        iframeYouTube.src = "";
        labelYouTubeUrlElem.innerText = "iframe";
      };

      function getSrc(iframeYouTube) {
        const regex_src = /https:\/\/www.youtube.com\/embed\/.{11,}?"/;
        src = iframeYouTube.match(regex_src);
        if (src) {
          src = src[0].slice(0, -1);
          return src;
        }
      }
    </script>

    <script>
      const mainElement = document.querySelector("main");
      // prevents video frame from overexpanding
      let width = mainElement.offsetWidth;
      if (width > 575) {
        width *= 0.3;
      }
      iframeYouTube.setAttribute("width", width);
    </script>


    <script>
      // clear output text in textarea for text radio btn selections
      const clearTextDataBtn=document.getElementById('fragment-clear-btn'); // used to clear textArea and especially fragment sub-component inputs. 
      const clearTextDataQuestionBtn=document.getElementById('question-clear-btn'); // used to clear textArea for question. 

      const radios = document.querySelectorAll('input[type=radio]');

      // textarea element for each text input option type
      const textAreaContentElement=document.getElementById('input-answer'); // regular
      const textAreaMarkdownElement=document.getElementById('input-answer-markdown');
      const textAreaLaTexElement=document.getElementById('input-answer-latex');
      const textAreaMermaidElement=document.getElementById('input-answer-mermaid');
      const textAreaWebpageElement=document.getElementById('input-answer-webpage');

      // fragment identifier for webpage text
      const fragmentDomain = document.getElementById('fragment-domain');
      const fragmentName = document.getElementById('fragment-name');
      const fragmentContainer=document.getElementById('fragment-container');
      const fragmentPrefix = document.getElementById('fragment-prefix');
      const fragmentSuffix = document.getElementById('fragment-suffix');
      const fragmentTextStart = document.getElementById('fragment-textStart');
      const fragmentTestEnd = document.getElementById('fragment-textEnd');
      const fragmentSubComponentArray=[fragmentPrefix,fragmentSuffix,fragmentTextStart,fragmentTestEnd];
      const fragmentBaseUrlAndNameArray=[fragmentDomain,fragmentName];

      // output confirmation element
      const outputDiv = document.getElementById('latex-answer-output');

      // Webpage url frag id has two data entry options. Entering data in textarea hides the other input sub-components.
      textAreaWebpageElement.addEventListener('input',hideFragmentSubComponents);
      function hideFragmentSubComponents(){
        /* handles hiding|showing of fragment constructor inputs.
            Calls a function to construct the frag id URL from textarea content.
            Calls a function to output url for confirmation.
        */
        const textAreaValue=this.value.trim();
        if(textAreaValue){
          fragmentPrefix.classList.add('d-none');
          fragmentSuffix.classList.add('d-none');
          fragmentTextStart.classList.add('d-none');
          fragmentTestEnd.classList.add('d-none');

          const URL=constructFragIdUrlFromTextArea(textAreaValue);
          outputURLConfirmation(URL);
        }else{
          fragmentPrefix.classList.remove('d-none');
          fragmentSuffix.classList.remove('d-none');
          fragmentTextStart.classList.remove('d-none');
          fragmentTestEnd.classList.remove('d-none');
        }
      }

      function constructFragIdUrlFromTextArea(textAreaContent){
        /* handles construction of URL from textarea text. */

        const sourceURL=fragmentDomain.value.trim();
        if(!textAreaContent || !sourceURL){
            return null;
        }

        let constructedURL=null;
        const fragmentIdDirective='#:~:text=';
        const encodedTextAreaContent=encodeURIComponent(textAreaContent);
        constructedURL=`${sourceURL}${fragmentIdDirective}${encodedTextAreaContent}`;
        return constructedURL;
      }

      function outputURLConfirmation(constructedURL, name){
        /* Outputs constructed URL and link in confirmation output area. */
        if(constructedURL){
          name=name||fragmentName.value.trim()||extractDomainName(constructedURL)||'Possible Source URL error.';
          // const anchor = `<a href=${constructedURL} rel="noopener noreferrer nofollow" target="_blank">${name}</a>`;
          // console.log(anchor);
          document.getElementById('input-answer-webpage-anchor').value = `${name}@${constructedURL}`; // use @ to split sting & construct on db.get() => <a href=constructedURL>name</a>
          // outputDiv.innerHTML = `${anchor}<br><p>${constructedURL}</p>`;
          outputDiv.innerHTML = `<a href=${constructedURL} rel="noopener noreferrer nofollow" target="_blank">${name}</a><br><p>${constructedURL}</p>`;
        }
      }
      function extractDomainName(subjectURL){
        const urlObj=new URL(subjectURL);
        const urlArray=urlObj.hostname.split('.');
        return urlArray.slice(-2).join('.');
      }


      //  Webpage url frag id has two data entry options. Entering data in input sub-components, hides textarea.
      fragmentSubComponentArray.forEach(element=>{
        element.addEventListener('input',hideTextArea);
      });
      function hideTextArea(){
        /* If data entered for fragment sub-components, hide textarea, then output constructed URL from sub-components. */
        const fragmentPrefixVal=fragmentPrefix.value.trim();
        const fragmentSuffixVal=fragmentSuffix.value.trim();
        const fragmentTextStartVal=fragmentTextStart.value.trim();
        const fragmentTestEndVal=fragmentTestEnd.value.trim();
        const baseURL=document.getElementById('fragment-domain').value.trim();

        if(fragmentPrefixVal || fragmentSuffixVal || fragmentTextStartVal || fragmentTestEndVal){
          textAreaWebpageElement.parentElement.classList.add('d-none');

          const constructedURL=constructFragIdUrlFromComponents(fragmentPrefixVal,fragmentSuffixVal,fragmentTextStartVal,fragmentTestEndVal,baseURL);
          outputURLConfirmation(constructedURL);
        }else{
          // textarea has text to be used in url fragment, unhide.
          textAreaWebpageElement.parentElement.classList.remove('d-none');
        }
      }

      function constructFragIdUrlFromComponents(prefix, suffix, textStart, textEnd, domain){
        /* Constructs fragment URL from range sub-components. */
        if(!domain || !textStart){
          return null;
        }
        let constructedURL=null;
        const fragmentIdDirective='#:~:text=';
        constructedURL=`${domain}${fragmentIdDirective}`;
        textStart=encodeURIComponent(textStart);

        if(!prefix && textEnd && !suffix){
          // textStart + textEnd
          constructedURL=`${constructedURL}${textStart},${encodeURIComponent(textEnd)}`;
          return constructedURL;
        }
        if(prefix && !textEnd && !suffix){
          // prefix + textStart
          constructedURL=`${constructedURL}${encodeURIComponent(prefix)}-,${textStart}`;
          return constructedURL;
        }
        if(prefix && textEnd && !suffix){
          // prefix + testStart + textEnd
          constructedURL=`${constructedURL}${encodeURIComponent(prefix)}-,${textStart},${encodeURIComponent(textEnd)}`;
          return constructedURL;
        }
        if(!prefix && textEnd && suffix){
          // testStart + textEnd + suffix
          constructedURL=`${constructedURL}${textStart},${encodeURIComponent(textEnd)},-${encodeURIComponent(suffix)}`;
          return constructedURL;
        }
        if(prefix && textEnd && suffix){
          // prefix + testStart + textEnd + suffix
          constructedURL=`${constructedURL}${encodeURIComponent(prefix)}-,${textStart},${encodeURIComponent(textEnd)},-${encodeURIComponent(suffix)}`;
          return constructedURL;
        }
        if(!prefix && !textEnd && !suffix){
          // textStart === full text match; same result as using textArea.
          constructedURL=`${constructedURL}${textStart}`;
          return constructedURL;
        }
        return null;
      }


      const answerRegularContainer=document.getElementById("input-answer-container");
      const answerMarkdownContainer=document.getElementById("input-answer-markdown-container");
      const answerLaTexContainer=document.getElementById("input-answer-latex-container");
      const answerMermaidContainer=document.getElementById("input-answer-mermaid-container");
      const answerWebpageContainer=document.getElementById("input-answer-webpage-container");
      // toggle textarea container for particular text input option types
      radios.forEach(function (radio) {
        radio.addEventListener("change", function () {
          fragmentContainer.classList.add('d-none');
          if (this.checked) {
            if(this.value !=='fragmentIdentifier'){
              // removes tooltip for dblclick instructions when webpage radio is not active
              const hasBootstrapTooltip=clearTextDataBtn.hasAttribute('data-bs-toggle');
              if(hasBootstrapTooltip){ destroyBootstrapTooltip(clearTextDataBtn); }
            }
            if(this.value === "regularText"){
              outputDiv.textContent = "";
              answerRegularContainer.classList.remove('d-none');
              textAreaContentElement.focus();
              answerMarkdownContainer.classList.add('d-none');
              answerLaTexContainer.classList.add('d-none');
              answerMermaidContainer.classList.add('d-none');
              answerWebpageContainer.classList.add('d-none');
            }else if(this.value === "markdownText"){
              outputDiv.textContent = "";
              answerRegularContainer.classList.add('d-none');
              answerMarkdownContainer.classList.remove('d-none');
              textAreaMarkdownElement.focus();
              answerLaTexContainer.classList.add('d-none');
              answerMermaidContainer.classList.add('d-none');
              answerWebpageContainer.classList.add('d-none');
            }else if(this.value === "latexText"){
              outputDiv.textContent = "";
              answerRegularContainer.classList.add('d-none');
              answerMarkdownContainer.classList.add('d-none');
              answerLaTexContainer.classList.remove('d-none');
              textAreaLaTexElement.focus();
              answerMermaidContainer.classList.add('d-none');
              answerWebpageContainer.classList.add('d-none');
            }else if(this.value === "mermaidText"){
              outputDiv.textContent = "";
              answerRegularContainer.classList.add('d-none');
              answerMarkdownContainer.classList.add('d-none');
              answerLaTexContainer.classList.add('d-none');
              answerMermaidContainer.classList.remove('d-none');
              textAreaMermaidElement.focus();
              answerWebpageContainer.classList.add('d-none');
            }else if(this.value === "fragmentIdentifier"){
              outputDiv.textContent = "";
              answerRegularContainer.classList.add('d-none');
              answerMarkdownContainer.classList.add('d-none');
              answerLaTexContainer.classList.add('d-none');
              answerMermaidContainer.classList.add('d-none');
              answerWebpageContainer.classList.remove('d-none');
              fragmentContainer.classList.remove('d-none');
              fragmentDomain.focus();
              createBootstrapTooltip(clearTextDataBtn);
            }
          }
        });
      });
      function destroyBootstrapTooltip(element){
        /* Dynamically removing bootstrap tooltip.
            Bootstrap tooltips already causes a performance hit.
            Dynamic operations further increase costs.
        */
        const tooltipAttributes=['toggle','placement','custom-class','html','title']; // delay, trigger
        tooltipAttributes.forEach(attribute=>{
          element.removeAttribute(`data-bs-${attribute}`);
        });
        const tooltipInstance=bootstrap.Tooltip.getInstance(element);
        if(tooltipInstance){ tooltipInstance.dispose(); }
      }
      function createBootstrapTooltip(element,titleMsg){
        /* Dynamically adding a bootstrap tooltip to an element.
            Bootstrap tooltips are already expensive.
            Dynamic operations make them even more so.

            .tooltip-inner {...} targets the element with the actual 
              text w/in the tooltip. it's not an attr, add the class 
              to the stylesheet if you want to say, text-align.

            'custom-tooltip' is a user-defined CSS rule class ie .custom-tooltip {...}
        */

        titleMsg=titleMsg||'<b>dblclick</b>: Clears Source URL & Link name.';

        // element.setAttribute('data-bs-toggle','tooltip');
        const tooltipAttributes={
          toggle:'tooltip',
          placement:'left',
          'custom-class':'custom-tooltip',
          html:'true',
          title:titleMsg,
          // delay: { show: 500, hide: 200 },
          // trigger: 'hover focus',
        };
        for(const [key,value] of Object.entries(tooltipAttributes)){
          element.setAttribute(`data-bs-${key}`,value);
        }
        
        // must initialize else not rendered.
        const tooltip=new bootstrap.Tooltip(element);
      }
      function updateBootstrapTooltipTitle(element,titleMsg){
        titleMsg=titleMsg||'New Title';
        // Set the data-bs-title attribute dynamically
        element.setAttribute('data-bs-title', titleMsg);
        // If Bootstrap tooltip is already initialized, update it
        const tooltip = new bootstrap.Tooltip(element);
        tooltip.update();
      }


      // delete textArea and fragment sub-component input:text data
      clearTextDataBtn.addEventListener('click',clearTextAreaAndFragInputs);
      function clearTextAreaAndFragInputs(){
        const radioSelection=this.form.querySelector("input[type='radio']:checked");
        // console.log(radioSelection)
        if(radioSelection.value === "regularText"){
          textAreaContentElement.value='';
          textAreaContentElement.focus();
        }else if(radioSelection.value === "markdownText"){
          textAreaMarkdownElement.value='';
          textAreaMarkdownElement.focus();
        }else if(radioSelection.value === "latexText"){
          textAreaLaTexElement.value='';
          textAreaLaTexElement.focus();
        }else if(radioSelection.value === "mermaidText"){
          textAreaMermaidElement.value='';
          textAreaMermaidElement.focus();
        }else if(radioSelection.value === "fragmentIdentifier"){
          textAreaWebpageElement.value='';
          answerWebpageContainer.classList.remove('d-none');
          fragmentSubComponentArray.forEach(function(inputElem){
            inputElem.value='';
            inputElem.classList.remove('d-none');
          });
          outputDiv.textContent = "";
          fragmentTextStart.focus();
        }          
      }
      // interestingly, dblclick DOES NOT work on mobile devices!! it's interpreted as zoom cmd. use "touchend" event to mimic.
      clearTextDataBtn.addEventListener('dblclick',clearTextFragDomainAndName);
      function clearTextFragDomainAndName(){
        fragmentBaseUrlAndNameArray.forEach(function(inputElem){
          inputElem.value='';
        });
      }
      clearTextDataBtn.addEventListener('touchend',clearTextFragDomainAndNameMobile);
      let lastTouchTime=0;
      function clearTextFragDomainAndNameMobile(){
        // ChatGPT solution to implement dblclick on mobile device. Default is zoom.
        const currentTime=new Date().getTime();
        const tapInterval=currentTime-lastTouchTime;
        if(tapInterval<300){
          event.preventDefault(); // Prevent default behavior (e.g. zoom)
          clearTextFragDomainAndName();
        }
        lastTouchTime=currentTime;
      }

      // Clear Question tab's textArea content
      clearTextDataQuestionBtn.addEventListener('click',clearTextAreaQuestion);
      function clearTextAreaQuestion(){
        document.getElementById('input-question').value='';
      }

      const dropdownText=document.getElementById('text-answer-tab');
      const dropdownImage=document.getElementById('image-answer-tab');
      const dropdownAudio=document.getElementById('audio-answer-tab');
      const dropdownVideoLocal=document.getElementById('video-local-answer-tab');
      const dropdownVideoYoutube=document.getElementById('video-youtube-answer-tab');
      const dropdownComponentsLessText=[dropdownImage,dropdownAudio,dropdownVideoLocal,dropdownVideoYoutube];
      // show clear btn when Question tab or Text<li> clicked
      document.getElementById('question-tab').onclick=function(){
        clearTextDataBtn.parentElement.classList.add('d-none');
        clearTextDataQuestionBtn.parentElement.classList.remove('d-none');
      }
      dropdownText.onclick=function(){
        clearTextDataBtn.parentElement.classList.remove('d-none');
        clearTextDataQuestionBtn.parentElement.classList.add('d-none');
      }
      // remove clear btn when image,audio,or video <li> clicked
      dropdownComponentsLessText.forEach(function(liElem){
        liElem.addEventListener('click',function(){
          clearTextDataBtn.parentElement.classList.add('d-none');
          clearTextDataQuestionBtn.parentElement.classList.add('d-none');
        });
      });

    </script>


    <script>
      const tasklistExtension = {
          type: 'lang', // Specify that it's a language extension
          filter: function(text) {
              // Regular expression to match task list items
              const taskListRegex = /- \[( |x)\] (.*)/g;
              
              // Replace task list syntax with HTML checkboxes
              return text.replace(taskListRegex, function(match, checked, label) {
                  const isChecked = checked.trim() === 'x' ? 'checked' : ''; // Check if task is completed
                  return '<label><input type="checkbox" ' + isChecked + '> ' + label + `</label><br>`;
              });
          }
      };
      // const markdownTextExample = `
      //   - [x] Task 1  
      //   - [ ] Task 2
      //   `;
      // Markdown, LaTex, & Mermaid preview output
      const markdownConverter = new showdown.Converter({
        extensions: [tasklistExtension],
        tables:true,
        strikethrough:true,
      });
      textAreaMarkdownElement.addEventListener("input", function () {
        const textAreaContent = this.value;
        outputDiv.innerHTML=markdownConverter.makeHtml(textAreaContent);
        MathJax.typesetPromise();
      });
      textAreaLaTexElement.addEventListener("input", function () {
        const textAreaContent = this.value;
        outputDiv.textContent=textAreaContent;
        MathJax.typesetPromise();
      });
      textAreaMermaidElement.addEventListener("input", function () {
        outputDiv.innerHTML = "";
        // create new div to ensure mermaid rerenders else no image shown just from inserting text.
        const mermaidElem = document.createElement("div");
        mermaidElem.className = "mermaid";
        mermaidElem.textContent = this.value;
        outputDiv.appendChild(mermaidElem);
        mermaid.init(undefined, mermaidElem);
      });
    </script>

    <!-- <script>
      // dark mode toggler

      const darkModeSwitch=document.getElementById('darkmode-toggler');
      darkModeSwitch.onchange=function(){
        const html = document.documentElement;
        if(this.checked){
          html.setAttribute('data-bs-theme','dark');
          return;
        }
        html.setAttribute('data-bs-theme','light');
      }
    </script> -->

    <script>
      // dark mode toggler for textarea confirmation content

      const darkModeTextareaConfirmationSwitch=document.getElementById('darkmode-toggler-textarea-confirmation');
      darkModeTextareaConfirmationSwitch.onchange=function(){
        const outputDiv = document.getElementById('latex-answer-output');
        if(this.checked){
          outputDiv.setAttribute('data-bs-theme','dark');
          return;
        }
        outputDiv.setAttribute('data-bs-theme','light');
      }
    </script>

    <script>
      // Hash tag processing
      const tagInputElement=document.getElementById('tags');
      tagInputElement.addEventListener('blur',function(){
        const tagInputValues=tagInputElement.value.toLowerCase();
        const tagsArray=tagInputValues.split(',');
        const tagsArrayTrimmed=[];
        const fragmentElement=document.createDocumentFragment();
        for(let i=0; i<tagsArray.length; i++){
          const item=tagsArray[i].trim();
          if(item){ 
            tagsArrayTrimmed.push(item); 
            const div=document.createElement('div');
            div.classList.add('rounded','border','border-warning');
            div.append(item)
            fragmentElement.append(div);
          }
        }
        const tagConfirmationContainer=document.getElementById('tag-confirmation-container');
        tagConfirmationContainer.innerHTML='';
        tagConfirmationContainer.append(fragmentElement);
        tagInputElement.value=tagsArrayTrimmed.join(',');
      });

    </script>

    <script
      async
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- <script defer>
      window.addEventListener('DOMContentLoaded',()=>{
        // initialize tooltip, when tooltip statically defined.
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
      })
    </script> -->

    <!-- <script
      defer
      src="//cdn.jsdelivr.net/npm/pouchdb@8.0.1/dist/pouchdb.min.js"
    ></script> -->

    <script>
      /*
                : PouchDB API Documentation 
                : MDN Web Docs: Using files from web applications 
                : MDN Web Docs: Blob 
                : MDN Web Docs: File 
                : MDN Web Docs: FileReader 
                : MDN Web Docs: URL.createObjectURL() 
                : MDN Web Docs: URL.revokeObjectURL() 
                : MDN Web Docs: HTMLMediaElement.load() 
                : MDN Web Docs: HTMLMediaElement.play() 
                : MDN Web Docs: HTMLMediaElement.pause() 
                : MDN Web Docs: HTMLMediaElement.currentTime 
                : MDN Web Docs: HTMLMediaElement.duration 
                : MDN Web Docs: HTMLMediaElement.played 
                : MDN Web Docs: HTMLMediaElement.seekable 
                : MDN Web Docs: HTMLMediaElement.buffered 
                : MDN Web Docs: HTMLMediaElement.volume 
                : MDN Web Docs: HTMLMediaElement.muted 
                : MDN Web Docs: HTMLMediaElement.defaultMuted 
                : MDN Web Docs: HTMLMediaElement.audioTracks 
                : MDN Web Docs: HTMLMediaElement.videoTracks 
                : MDN Web Docs: HTMLMediaElement.textTracks 
                : MDN Web Docs: HTMLMediaElement.addTextTrack() 
                : MDN Web Docs: HTMLMediaElement.canPlayType() 
                : MDN Web Docs: HTMLMediaElement.captureStream() 
                : MDN Web Docs: HTMLMediaElement.fastSeek() 
                : MDN Web Docs: HTMLMediaElement.setSinkId() 
                : MDN Web Docs: HTMLMediaElement.getStartDate() 
                : MDN Web Docs: HTMLMediaElement.playbackRate 
                : MDN Web Docs: HTMLMediaElement.defaultPlaybackRate 
                : MDN Web Docs: HTMLMediaElement.preservesPitch 
                : MDN Web Docs: HTMLMediaElement.playbackQuality 
                : MDN Web Docs: HTMLMediaElement.getVideoPlaybackQuality() 
                : MDN Web Docs: HTMLMediaElement.disableRemotePlayback 
                : MDN Web Docs: HTMLMediaElement.remote 
                : MDN Web Docs: HTMLMediaElement.srcObject 
                : MDN Web Docs: HTMLMediaElement.mediaKeys 
                : MDN Web Docs: HTMLMediaElement.setMediaKeys() 
                : MDN Web Docs: HTMLMediaElement.mediaSession 
                : MDN Web Docs: HTMLMediaElement.networkState 
                : MDN Web Docs: HTMLMediaElement.readyState 
                : MDN Web Docs: HTMLMediaElement.seeking 
                : MDN Web Docs: HTMLMediaElement.currentTime 
                : MDN Web Docs: HTMLMediaElement.duration 
                : MDN Web Docs: HTMLMediaElement.paused 
                : MDN Web Docs: HTMLMediaElement.defaultPlaybackRate 
                : MDN Web Docs: HTMLMediaElement.playbackRate 
                : MDN Web Docs: HTMLMediaElement.played 
                : MDN Web Docs: HTMLMediaElement.seekable 
                : MDN Web Docs: HTMLMediaElement.ended 
                : MDN Web Docs: HTMLMediaElement.autoplay 
                : MDN Web Docs: HTMLMediaElement.loop 
                : MDN Web Docs: HTMLMediaElement.controls 
                : MDN Web Docs: HTMLMediaElement.volume 
                : MDN Web Docs: HTMLMediaElement.muted 
                : MDN Web Docs: HTMLMediaElement.defaultMuted
            */

      /*
                // Assuming you have an <input type="file" id="myFileInput">
                document.getElementById('myFileInput').addEventListener('change', function(e) {
                    const file = e.target.files[0]; // This is a Blob object

                    // Create a new PouchDB database
                    const db = new PouchDB('my_database');

                    // Create a new document with the Blob
                    db.put({
                        _id: 'my_document',
                        _attachments: {
                            'file': {
                                content_type: file.type,
                                data: file
                            }
                        }
                    }).then(function(response) {
                        console.log('Document created successfully');
                    }).catch(function(error) {
                        console.error('Error creating document:', error);
                    });
                });
            */

      /*
                // Create a new PouchDB database
                const db = new PouchDB('my_database');

                // Get the document with the attachment
                db.get('my_document', {attachments: true}).then(function(doc) {
                    // Get the attachment as a Blob object
                    const file = doc._attachments.file.data;

                    // Create a blob URL representing the file
                    let url = URL.createObjectURL(file);

                    // Set the blob URL as the src for the audio element
                    document.getElementById('uploaded-audio').src = url;
                }).catch(function(error) {
                    console.error('Error retrieving document:', error);
                });
            */
    </script>
  </body>
</html>
